div(ng-include='"components/navbar/navbar.html"')

.wrapper.row-offcanvas.row-offcanvas-left
    aside.left-side.sidebar-offcanvas
        div(ng-include='"components/sidebar/sidebar.html"')
    aside.right-side
        section.content-header
            h1 Utilisateurs
                button.btn.btn-sm.btn-primary.pull-right(ng-click='create()')
                    i.fa.fa-plus
                    span  Ajouter
        section.content
            .row
                .col-xs-12
                    .box
                        .box-header
                            h3.box-title Liste des utilisateurs
                            .box-tools
                                .col-xs-5
                                    .input-group
                                        input.form-control.input-sm.pull-right(type='text', ng-model='search', placeHolder='Recherche')
                                        .input-group-btn
                                            button.btn.btn-sm.btn-default
                                                i.fa.fa-search
                                pagination.pagination.pagination-sm.pull-right.no-margin(total-items='users', ng-model='page', max-size='5')
                        .box-body.table-responsible.no-padding
                            table.table.table-hover
                                tbody
                                    tr
                                        th Nom
                                        th Email
                                        th Téléphone
                                        th Actions
                                    tr(ng-repeat='user in users | filter:search')
                                        td {{user.name}}
                                        td {{user.email}}
                                        td {{user.phone}}
                                        td
                                            button.btn.btn-sm.btn-danger.pull-right.btn-flat(ng-click='confirm(user)')
                                                i.fa.fa-trash
                                            button.btn.btn-sm.btn-primary.pull-right.btn-flat(ng-click='update(user)')
                                                i.fa.fa-pencil
                        .box-footer.clearfix
                            pagination.pagination.pagination-sm.pull-right.no-margin(total-items='users', ng-model='page', max-size='5')


script(type='text/ng-template', id='modal.html')
    .modal-primary
        .modal-header
            button.close(type='button', ng-click='$dismiss()') &times;
            h4.modal-title Ajouter un nouvel utilisateur
        .modal-body
            form(name='form')
                .form-group
                    label Nom
                    input.form-control(type='text', ng-model='user.name')
                .form-group
                    label Numéro
                    input.form-control(type='text', ng-model='user.phone')
                .form-group
                    label Adresse email
                    input.form-control(type='email', ng-model='user.email')
                label Mot de passe
                .input-group
                    input.form-control(type='text', ng-model='user.pass')
                    span.input-group-btn
                        button.btn.btn-default(type='button', ng-click='refresh()')
                            i.fa.fa-refresh
                .form-group
                    label Adresse
                    input.form-control(type='text', ng-model='user.address')
                    br
                    ui-gmap-google-map(center='map.center', zoom='map.zoom')
                        ui-gmap-marker(idKey='1', coords='user.from')

        .modal-footer
            button.btn.btn-primary(ng-click='$close()') {{ user._id && 'Modifier' || 'Ajouter'}}
            button.btn.btn-default(ng-click='$dismiss()') Annuler

script(type='text/ng-template', id='confirm.html')
    .modal-danger
        .modal-header
            button.close(type='button', ng-click='$dismiss()') &times;
            h4.modal-title Confirmation
        .modal-body
            p Êtes vous certain de vouloir supprimer
                strong  {{user.name}} ?
        .modal-footer
            button.btn.btn-danger(ng-click='$close()') Supprimer
            button.btn.btn-default(ng-click='$dismiss()') Annuler
