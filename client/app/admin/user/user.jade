div(ng-include='"components/navbar/navbar.html"')

.container
    .row
        .col-md-10
            .input-group
                input.form-control(type='text', ng-model='search')
                span.input-group-addon
                    span.glyphicon.glyphicon-search
        .col-md-2
            span.btn.btn-primary.pull-right(ng-click='action = "new"') Ajouter
    .row(ng-show='action == "new"')
        .col-md-6
            h3 Ajouter un nouvel utilisateur
            form(name='form')
                .form-group
                    label Nom
                    input.form-control(type='text', ng-model='user.name')
                .form-group
                    label Numéro
                    input.form-control(type='text', ng-model='user.phone')
                .form-group
                    label Adresse email
                    input.form-control(type='email', ng-model='user.email')
                .form-group
                    label Adresse
                    input.form-control#search(type='text', ng-model='user.address')
                input.btn.btn-primary(ng-click='add(form)', type='submit', value="{{ user._id && 'Modifier' || 'Ajouter'}}")
        .col-md-6
            br
            #map
    br
    .row
        .col-md-12
            .list-group
                a.list-group-item(ng-repeat='user in users | filter:search', href="#{{user._id}}", ng-click='select(user)') {{user.name}}
                    span.btn.btn-sm.btn-danger.glyphicon.glyphicon-trash.pull-right(ng-click='confirm()')
                    form(name='edit', ng-if='selected._id === user._id')
                        .form-group
                            label Nom
                            input.form-control(type='text', ng-model='user.name', required='')
                        .form-group
                            label Numéro
                            input.form-control(type='text', ng-model='user.phone')
                        .form-group
                            label Adresse email
                            input.form-control(type='email', ng-model='user.email')
                        .form-group
                            label Adresse
                            input.form-control(type='text', ng-model='user.address', required='')
                        input.btn.btn-primary(ng-click='update(edit)', type='submit', value="{{ user._id && 'Modifier' || 'Ajouter'}}")
