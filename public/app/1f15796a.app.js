"use strict";angular.module("theHomePassApp",["ngCookies","ngResource","ngSanitize","btford.socket-io","ui.router","ui.bootstrap","restangular","angularFileUpload","selectize-ng","uuid4","uiGmapgoogle-maps"]).config(["$stateProvider","$urlRouterProvider","$locationProvider","$httpProvider","RestangularProvider","uiGmapGoogleMapApiProvider",function(a,b,c,d,e,f){b.otherwise("/"),c.html5Mode(!0).hashPrefix("!"),d.interceptors.push("authInterceptor"),e.setBaseUrl("/api"),e.setRestangularFields({id:"_id"}),f.configure({libraries:"places"})}]).factory("authInterceptor",["$rootScope","$q","$cookieStore","$location",function(a,b,c,d){return{request:function(a){return a.headers=a.headers||{},c.get("token")&&(a.headers.Authorization="Bearer "+c.get("token")),a},responseError:function(a){return 401===a.status?(d.path("/login"),c.remove("token"),b.reject(a)):b.reject(a)}}}]).run(["$rootScope","$location","Auth",function(a,b,c){a.$on("$stateChangeStart",function(a,d){c.isLoggedInAsync(function(a){d.authenticate&&!a&&b.path("/login")})})}]),angular.module("theHomePassApp").config(["$stateProvider",function(a){a.state("login",{url:"/login",templateUrl:"app/account/login/login.html",controller:"LoginCtrl"}).state("signup",{url:"/signup",templateUrl:"app/account/signup/signup.html",controller:"SignupCtrl"}).state("settings",{url:"/settings",templateUrl:"app/account/settings/settings.html",controller:"SettingsCtrl",authenticate:!0})}]),angular.module("theHomePassApp").controller("LoginCtrl",["$scope","Auth","$state",function(a,b,c){a.user={},a.errors={},a.login=function(d){d.$valid&&b.pass({pass:a.user.pass}).then(function(){c.go("main")}).catch(function(){a.error=!0})}}]),angular.module("theHomePassApp").controller("SettingsCtrl",["$scope","User","Auth",function(a,b,c){a.errors={},a.changePassword=function(b){a.submitted=!0,b.$valid&&c.changePassword(a.user.oldPassword,a.user.newPassword).then(function(){a.message="Password successfully changed."}).catch(function(){b.password.$setValidity("mongoose",!1),a.errors.other="Incorrect password",a.message=""})}}]),angular.module("theHomePassApp").controller("SignupCtrl",["$scope","Auth","$location",function(a,b,c){a.user={},a.errors={},a.register=function(d){a.submitted=!0,d.$valid&&b.createUser({name:a.user.name,email:a.user.email,password:a.user.password}).then(function(){c.path("/")}).catch(function(b){b=b.data,a.errors={},angular.forEach(b.errors,function(b,c){d[c].$setValidity("mongoose",!1),a.errors[c]=b.message})})}}]),angular.module("theHomePassApp").controller("AdCtrl",["$scope","ads","$rootScope","$modal","Restangular",function(a,b,c,d,e){a.ads=b,a.ad={},a.create=function(){a.ad={},d.open({templateUrl:"modal.html",scope:a}).result.then(function(){b.post(a.ads).then(function(b){a.ads.push(b)})})},a.update=function(b){a.ad=e.copy(b),d.open({templateUrl:"modal.html",scope:a}).result.then(function(){a.ad.put().then(function(b){a.ads=_.map(a.ads,function(a){return a._id===b._id?b:a})})})},a.confirm=function(b){a.ad=b,d.open({templateUrl:"confirm.html",scope:a}).result.then(function(){b.remove().then(function(){a.ads=_.without(a.ads,b)})})},c.$on("update",function(b,c){a.update(c)}),c.$on("delete",function(b,c){a.confirm(c)})}]),angular.module("theHomePassApp").controller("AdminCtrl",["$scope",function(){}]),angular.module("theHomePassApp").config(["$stateProvider",function(a){a.state("admin",{url:"/admin",templateUrl:"app/admin/admin.html",controller:"AdminCtrl",authenticate:!0}).state("userAdmin",{url:"/admin/user",templateUrl:"app/admin/user/user.html",controller:"UserAdminCtrl",authenticate:!0,resolve:{users:["Restangular",function(a){return a.all("users").all("admin").getList()}]}}).state("categoryAdmin",{url:"/admin/categories",templateUrl:"app/admin/category/category.html",controller:"CategoryAdminCtrl",authenticate:!0,resolve:{categories:["Restangular",function(a){return a.all("categories").getList()}]}}).state("adAdmin",{url:"/admin/ad",templateUrl:"app/admin/ad/ad.html",controller:"AdCtrl",authenticate:!0,resolve:{ads:["Restangular",function(a){return a.all("ads").getList()}]}})}]),angular.module("theHomePassApp").controller("CategoryAdminCtrl",["$scope","$rootScope","categories","$modal","Restangular",function(a,b,c,d,e){a.categories=c,a.category={},a.create=function(){a.category={},d.open({templateUrl:"modal.html",scope:a}).result.then(function(){c.post(a.category).then(function(b){a.categories.push(b)})})},a.update=function(b){a.category=e.copy(b),d.open({templateUrl:"modal.html",scope:a}).result.then(function(){a.category.put().then(function(b){a.categories=_.map(a.categories,function(a){return a._id===b._id?b:a})})})},a.confirm=function(b){a.category=b,d.open({templateUrl:"confirm.html",scope:a}).result.then(function(){b.remove().then(function(){a.categories=_.without(a.categories,b)})})},b.$on("update",function(b,c){a.update(c)}),b.$on("delete",function(b,c){a.confirm(c)})}]),angular.module("theHomePassApp").controller("UserAdminCtrl",["$scope","users","$modal","Restangular","uuid4","$rootScope","GoogleMapApi".ns(),function(a,b,c,d,e,f,g){a.users=b,a.user={},a.$watch("user.from",function(){console.log(a.user),void 0!=a.user.from?console.log(a.user.from):angular.element("#from_input").val(null)}),a.$watch("user.to.address",function(){angular.element("#to_input").val(a.user.to?a.user.to.address:null)}),g.then(function(){a.map={center:{latitude:48.89670230000001,longitude:2.3183781999999997},zoom:15},a.events={from:{places_changed:function(b){var c=b.getPlaces()[0];void 0!==c&&(a.user.from={address:c.formatted_address,latitude:c.geometry.location.k,longitude:c.geometry.location.B},console.log(a.user.from),a.map.center={latitude:c.geometry.location.k,longitude:c.geometry.location.B})}},to:{places_changed:function(b){var c=b.getPlaces()[0];void 0!==c&&(a.user.to={address:c.formatted_address,latitude:c.geometry.location.k,longitude:c.geometry.location.B},a.map.center={latitude:c.geometry.location.k,longitude:c.geometry.location.B})}}}}),a.refresh=function(){a.user.pass=e.generate().split("-")[1]},a.create=function(){a.user={},a.refresh(),a.map.center={latitude:48.89670230000001,longitude:2.3183781999999997},c.open({templateUrl:"modal.html",scope:a}).result.then(function(){a.user.password=a.user.pass,b.post(a.user).then(function(b){console.log(b),a.users.push(b)})})},a.update=function(b){a.user=d.copy(b),a.map.center=a.user.from?{latitude:a.user.from.latitude,longitude:a.user.from.longitude}:a.user.to?{latitude:a.user.to.latitude,longitude:a.user.to.longitude}:{latitude:48.89670230000001,longitude:2.3183781999999997},console.log(b.to),console.log(b.from),angular.element("#from_input").val(a.user.from.address),angular.element("#to_input").val(a.user.to.address),c.open({templateUrl:"modal.html",scope:a}).result.then(function(){a.user.put().then(function(b){a.users=_.map(a.users,function(a){return a._id===b._id?b:a})})})},a.confirm=function(b){a.user=b,c.open({templateUrl:"confirm.html",scope:a}).result.then(function(){b.remove().then(function(){a.users=_.without(a.users,b)})})},f.$on("update",function(b,c){a.update(c)}),f.$on("delete",function(b,c){a.confirm(c)})}]),angular.module("theHomePassApp").controller("LoginAdvertiserCtrl",["$scope","Auth","$state",function(a,b,c){a.user={},a.errors={},a.login=function(d){d.$valid&&b.login({email:a.user.email,password:a.user.password}).then(function(){c.go("main")}).catch(function(){a.error=!0})}}]),angular.module("theHomePassApp").controller("SignupAdvertiserCtrl",["$scope","Auth","$state",function(){}]),angular.module("theHomePassApp").controller("AdvertiserCtrl",["$scope","ads","pos","categories","Restangular","Modal","$upload","GoogleMapApi".ns(),function(a,b,c,d,e,f,g,h){a.ads=b,a.ad={type:"euro"},a.pos=c,a.categories=d,a.$watch("ad.pos",function(b,c){if(a.ad.pos){a.circles=[];var d=a.ad.pos.split(",");_.forEach(a.pos,function(b){_.contains(d,b._id)?(b.icon="http://maps.google.com/mapfiles/ms/icons/green-dot.png",a.circles.push(b)):b.icon=null});var e=_.difference(b.split(","),c.split(",")),f=_.findWhere(a.pos,{_id:e[0]});f&&(a.map.center.latitude=f.latitude,a.map.center.longitude=f.longitude)}else a.ad.pos="",a.circles=[],_.forEach(a.pos,function(a){a.icon=null})}),h.then(function(){a.map={center:{latitude:48.89670230000001,longitude:2.3183781999999997},zoom:8},a.circle={stroke:{color:"#ff",weight:2,opacity:.5},fill:{color:"#ff",opacity:.25}},a.events={click:function(b,c,d){a.ad.pos||(a.ad.pos="");var e=a.ad.pos.split(",");_.contains(e,d._id)?(b.setIcon(null),e=_.without(e,d._id),a.ad.pos=e.join()):(b.setIcon("http://maps.google.com/mapfiles/ms/icons/green-dot.png"),a.ad.pos+=","+d._id)}}}),a.onFileSelect=function(b){a.upload=g.upload({url:"api/uploads/",file:b[0]}).success(function(b){a.ad.image=b.path})},a.confirm=function(){f.confirm.delete(function(){a.selected.remove().then(function(){a.pos=_.without(a.pos,a.selected)})})};var i=e.all("ads");a.send=function(b){b.$valid&&(a.ad._id?a.ad.put():i.post(a.ad).then(function(b){a.ads.push(b),a.ad={type:"euro"}}))},a.config={plugins:["remove_button"],labelField:"name",searchField:["name","address"],valueField:"_id",create:!1,render:{option:function(a){return"<div><strong>"+a.name+"</strong><br><em>"+a.address+"</em></div>"}}}}]),angular.module("theHomePassApp").config(["$stateProvider",function(a){a.state("ad",{url:"/advertiser/ad",templateUrl:"app/advertiser/ad/ad.html",controller:"AdvertiserCtrl",authenticate:!0,resolve:{ads:["Restangular",function(a){return a.all("ads").getList()}],pos:["Restangular",function(a){return a.all("pos").getList()}],categories:["Restangular",function(a){return a.all("categories").getList()}]}})}]),!function(a){function b(a,b){return function(c){return i(a.call(this,c),b)}}function c(a,b){return function(c){return this.lang().ordinal(a.call(this,c),b)}}function d(){}function e(a){g(this,a)}function f(a){var b=a.years||a.year||a.y||0,c=a.months||a.month||a.M||0,d=a.weeks||a.week||a.w||0,e=a.days||a.day||a.d||0,f=a.hours||a.hour||a.h||0,g=a.minutes||a.minute||a.m||0,h=a.seconds||a.second||a.s||0,i=a.milliseconds||a.millisecond||a.ms||0;this._input=a,this._milliseconds=i+1e3*h+6e4*g+36e5*f,this._days=e+7*d,this._months=c+12*b,this._data={},this._bubble()}function g(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}function h(a){return 0>a?Math.ceil(a):Math.floor(a)}function i(a,b){for(var c=a+"";c.length<b;)c="0"+c;return c}function j(a,b,c,d){var e,f,g=b._milliseconds,h=b._days,i=b._months;g&&a._d.setTime(+a._d+g*c),(h||i)&&(e=a.minute(),f=a.hour()),h&&a.date(a.date()+h*c),i&&a.month(a.month()+i*c),g&&!d&&H.updateOffset(a),(h||i)&&(a.minute(e),a.hour(f))}function k(a){return"[object Array]"===Object.prototype.toString.call(a)}function l(a,b){var c,d=Math.min(a.length,b.length),e=Math.abs(a.length-b.length),f=0;for(c=0;d>c;c++)~~a[c]!==~~b[c]&&f++;return f+e}function m(a){return a?eb[a]||a.toLowerCase().replace(/(.)s$/,"$1"):a}function n(a,b){return b.abbr=a,L[a]||(L[a]=new d),L[a].set(b),L[a]}function o(a){if(!a)return H.fn._lang;if(!L[a]&&M)try{require("./lang/"+a)}catch(b){return H.fn._lang}return L[a]}function p(a){return a.match(/\[.*\]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function q(a){var b,c,d=a.match(P);for(b=0,c=d.length;c>b;b++)d[b]=ib[d[b]]?ib[d[b]]:p(d[b]);return function(e){var f="";for(b=0;c>b;b++)f+=d[b]instanceof Function?d[b].call(e,a):d[b];return f}}function r(a,b){function c(b){return a.lang().longDateFormat(b)||b}for(var d=5;d--&&Q.test(b);)b=b.replace(Q,c);return fb[b]||(fb[b]=q(b)),fb[b](a)}function s(a,b){switch(a){case"DDDD":return T;case"YYYY":return U;case"YYYYY":return V;case"S":case"SS":case"SSS":case"DDD":return S;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return W;case"a":case"A":return o(b._l)._meridiemParse;case"X":return Z;case"Z":case"ZZ":return X;case"T":return Y;case"MM":case"DD":case"YY":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":return R;default:return new RegExp(a.replace("\\",""))}}function t(a){var b=(X.exec(a)||[])[0],c=(b+"").match(bb)||["-",0,0],d=+(60*c[1])+~~c[2];return"+"===c[0]?-d:d}function u(a,b,c){var d,e=c._a;switch(a){case"M":case"MM":e[1]=null==b?0:~~b-1;break;case"MMM":case"MMMM":d=o(c._l).monthsParse(b),null!=d?e[1]=d:c._isValid=!1;break;case"D":case"DD":case"DDD":case"DDDD":null!=b&&(e[2]=~~b);break;case"YY":e[0]=~~b+(~~b>68?1900:2e3);break;case"YYYY":case"YYYYY":e[0]=~~b;break;case"a":case"A":c._isPm=o(c._l).isPM(b);break;case"H":case"HH":case"h":case"hh":e[3]=~~b;break;case"m":case"mm":e[4]=~~b;break;case"s":case"ss":e[5]=~~b;break;case"S":case"SS":case"SSS":e[6]=~~(1e3*("0."+b));break;case"X":c._d=new Date(1e3*parseFloat(b));break;case"Z":case"ZZ":c._useUTC=!0,c._tzm=t(b)}null==b&&(c._isValid=!1)}function v(a){var b,c,d=[];if(!a._d){for(b=0;7>b;b++)a._a[b]=d[b]=null==a._a[b]?2===b?1:0:a._a[b];d[3]+=~~((a._tzm||0)/60),d[4]+=~~((a._tzm||0)%60),c=new Date(0),a._useUTC?(c.setUTCFullYear(d[0],d[1],d[2]),c.setUTCHours(d[3],d[4],d[5],d[6])):(c.setFullYear(d[0],d[1],d[2]),c.setHours(d[3],d[4],d[5],d[6])),a._d=c}}function w(a){var b,c,d=a._f.match(P),e=a._i;for(a._a=[],b=0;b<d.length;b++)c=(s(d[b],a).exec(e)||[])[0],c&&(e=e.slice(e.indexOf(c)+c.length)),ib[d[b]]&&u(d[b],c,a);e&&(a._il=e),a._isPm&&a._a[3]<12&&(a._a[3]+=12),a._isPm===!1&&12===a._a[3]&&(a._a[3]=0),v(a)}function x(a){var b,c,d,f,h,i=99;for(f=0;f<a._f.length;f++)b=g({},a),b._f=a._f[f],w(b),c=new e(b),h=l(b._a,c.toArray()),c._il&&(h+=c._il.length),i>h&&(i=h,d=c);g(a,d)}function y(a){var b,c=a._i,d=$.exec(c);if(d){for(a._f="YYYY-MM-DD"+(d[2]||" "),b=0;4>b;b++)if(ab[b][1].exec(c)){a._f+=ab[b][0];break}X.exec(c)&&(a._f+=" Z"),w(a)}else a._d=new Date(c)}function z(b){var c=b._i,d=N.exec(c);c===a?b._d=new Date:d?b._d=new Date(+d[1]):"string"==typeof c?y(b):k(c)?(b._a=c.slice(0),v(b)):b._d=new Date(c instanceof Date?+c:c)}function A(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function B(a,b,c){var d=K(Math.abs(a)/1e3),e=K(d/60),f=K(e/60),g=K(f/24),h=K(g/365),i=45>d&&["s",d]||1===e&&["m"]||45>e&&["mm",e]||1===f&&["h"]||22>f&&["hh",f]||1===g&&["d"]||25>=g&&["dd",g]||45>=g&&["M"]||345>g&&["MM",K(g/30)]||1===h&&["y"]||["yy",h];return i[2]=b,i[3]=a>0,i[4]=c,A.apply({},i)}function C(a,b,c){var d,e=c-b,f=c-a.day();return f>e&&(f-=7),e-7>f&&(f+=7),d=H(a).add("d",f),{week:Math.ceil(d.dayOfYear()/7),year:d.year()}}function D(a){var b=a._i,c=a._f;return null===b||""===b?null:("string"==typeof b&&(a._i=b=o().preparse(b)),H.isMoment(b)?(a=g({},b),a._d=new Date(+b._d)):c?k(c)?x(a):w(a):z(a),new e(a))}function E(a,b){H.fn[a]=H.fn[a+"s"]=function(a){var c=this._isUTC?"UTC":"";return null!=a?(this._d["set"+c+b](a),H.updateOffset(this),this):this._d["get"+c+b]()}}function F(a){H.duration.fn[a]=function(){return this._data[a]}}function G(a,b){H.duration.fn["as"+a]=function(){return+this/b}}for(var H,I,J="2.1.0",K=Math.round,L={},M="undefined"!=typeof module&&module.exports,N=/^\/?Date\((\-?\d+)/i,O=/(\-)?(\d*)?\.?(\d+)\:(\d+)\:(\d+)\.?(\d{3})?/,P=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|SS?S?|X|zz?|ZZ?|.)/g,Q=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,R=/\d\d?/,S=/\d{1,3}/,T=/\d{3}/,U=/\d{1,4}/,V=/[+\-]?\d{1,6}/,W=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,X=/Z|[\+\-]\d\d:?\d\d/i,Y=/T/i,Z=/[\+\-]?\d+(\.\d{1,3})?/,$=/^\s*\d{4}-\d\d-\d\d((T| )(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?/,_="YYYY-MM-DDTHH:mm:ssZ",ab=[["HH:mm:ss.S",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],bb=/([\+\-]|\d\d)/gi,cb="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),db={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},eb={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",w:"week",M:"month",y:"year"},fb={},gb="DDD w W M D d".split(" "),hb="M D H h m s w W".split(" "),ib={M:function(){return this.month()+1},MMM:function(a){return this.lang().monthsShort(this,a)},MMMM:function(a){return this.lang().months(this,a)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(a){return this.lang().weekdaysMin(this,a)},ddd:function(a){return this.lang().weekdaysShort(this,a)},dddd:function(a){return this.lang().weekdays(this,a)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return i(this.year()%100,2)},YYYY:function(){return i(this.year(),4)},YYYYY:function(){return i(this.year(),5)},gg:function(){return i(this.weekYear()%100,2)},gggg:function(){return this.weekYear()},ggggg:function(){return i(this.weekYear(),5)},GG:function(){return i(this.isoWeekYear()%100,2)},GGGG:function(){return this.isoWeekYear()},GGGGG:function(){return i(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return~~(this.milliseconds()/100)},SS:function(){return i(~~(this.milliseconds()/10),2)},SSS:function(){return i(this.milliseconds(),3)},Z:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+i(~~(a/60),2)+":"+i(~~a%60,2)},ZZ:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+i(~~(10*a/6),4)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()}};gb.length;)I=gb.pop(),ib[I+"o"]=c(ib[I],I);for(;hb.length;)I=hb.pop(),ib[I+I]=b(ib[I],2);for(ib.DDDD=b(ib.DDD,3),d.prototype={set:function(a){var b,c;for(c in a)b=a[c],"function"==typeof b?this[c]=b:this["_"+c]=b},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(a){return this._months[a.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(a){return this._monthsShort[a.month()]},monthsParse:function(a){var b,c,d;for(this._monthsParse||(this._monthsParse=[]),b=0;12>b;b++)if(this._monthsParse[b]||(c=H([2e3,b]),d="^"+this.months(c,"")+"|^"+this.monthsShort(c,""),this._monthsParse[b]=new RegExp(d.replace(".",""),"i")),this._monthsParse[b].test(a))return b},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(a){return this._weekdays[a.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(a){return this._weekdaysShort[a.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(a){return this._weekdaysMin[a.day()]},weekdaysParse:function(a){var b,c,d;for(this._weekdaysParse||(this._weekdaysParse=[]),b=0;7>b;b++)if(this._weekdaysParse[b]||(c=H([2e3,1]).day(b),d="^"+this.weekdays(c,"")+"|^"+this.weekdaysShort(c,"")+"|^"+this.weekdaysMin(c,""),this._weekdaysParse[b]=new RegExp(d.replace(".",""),"i")),this._weekdaysParse[b].test(a))return b},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(a){var b=this._longDateFormat[a];return!b&&this._longDateFormat[a.toUpperCase()]&&(b=this._longDateFormat[a.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a]=b),b},isPM:function(a){return"p"===(a+"").toLowerCase()[0]},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(a,b){var c=this._calendar[a];return"function"==typeof c?c.apply(b):c},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(a,b,c,d){var e=this._relativeTime[c];return"function"==typeof e?e(a,b,c,d):e.replace(/%d/i,a)},pastFuture:function(a,b){var c=this._relativeTime[a>0?"future":"past"];return"function"==typeof c?c(b):c.replace(/%s/i,b)},ordinal:function(a){return this._ordinal.replace("%d",a)},_ordinal:"%d",preparse:function(a){return a},postformat:function(a){return a},week:function(a){return C(a,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6}},H=function(a,b,c){return D({_i:a,_f:b,_l:c,_isUTC:!1})},H.utc=function(a,b,c){return D({_useUTC:!0,_isUTC:!0,_l:c,_i:a,_f:b})},H.unix=function(a){return H(1e3*a)},H.duration=function(a,b){var c,d,e=H.isDuration(a),g="number"==typeof a,h=e?a._input:g?{}:a,i=O.exec(a);return g?b?h[b]=a:h.milliseconds=a:i&&(c="-"===i[1]?-1:1,h={y:0,d:~~i[2]*c,h:~~i[3]*c,m:~~i[4]*c,s:~~i[5]*c,ms:~~i[6]*c}),d=new f(h),e&&a.hasOwnProperty("_lang")&&(d._lang=a._lang),d},H.version=J,H.defaultFormat=_,H.updateOffset=function(){},H.lang=function(a,b){return a?(b?n(a,b):L[a]||o(a),void(H.duration.fn._lang=H.fn._lang=o(a))):H.fn._lang._abbr},H.langData=function(a){return a&&a._lang&&a._lang._abbr&&(a=a._lang._abbr),o(a)},H.isMoment=function(a){return a instanceof e},H.isDuration=function(a){return a instanceof f},H.fn=e.prototype={clone:function(){return H(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){return r(H(this).utc(),"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var a=this;return[a.year(),a.month(),a.date(),a.hours(),a.minutes(),a.seconds(),a.milliseconds()]},isValid:function(){return null==this._isValid&&(this._isValid=this._a?!l(this._a,(this._isUTC?H.utc(this._a):H(this._a)).toArray()):!isNaN(this._d.getTime())),!!this._isValid},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(a){var b=r(this,a||H.defaultFormat);return this.lang().postformat(b)},add:function(a,b){var c;return c="string"==typeof a?H.duration(+b,a):H.duration(a,b),j(this,c,1),this},subtract:function(a,b){var c;return c="string"==typeof a?H.duration(+b,a):H.duration(a,b),j(this,c,-1),this},diff:function(a,b,c){var d,e,f=this._isUTC?H(a).zone(this._offset||0):H(a).local(),g=6e4*(this.zone()-f.zone());return b=m(b),"year"===b||"month"===b?(d=432e5*(this.daysInMonth()+f.daysInMonth()),e=12*(this.year()-f.year())+(this.month()-f.month()),e+=(this-H(this).startOf("month")-(f-H(f).startOf("month")))/d,e-=6e4*(this.zone()-H(this).startOf("month").zone()-(f.zone()-H(f).startOf("month").zone()))/d,"year"===b&&(e/=12)):(d=this-f,e="second"===b?d/1e3:"minute"===b?d/6e4:"hour"===b?d/36e5:"day"===b?(d-g)/864e5:"week"===b?(d-g)/6048e5:d),c?e:h(e)},from:function(a,b){return H.duration(this.diff(a)).lang(this.lang()._abbr).humanize(!b)},fromNow:function(a){return this.from(H(),a)},calendar:function(){var a=this.diff(H().startOf("day"),"days",!0),b=-6>a?"sameElse":-1>a?"lastWeek":0>a?"lastDay":1>a?"sameDay":2>a?"nextDay":7>a?"nextWeek":"sameElse";return this.format(this.lang().calendar(b,this))},isLeapYear:function(){var a=this.year();return 0===a%4&&0!==a%100||0===a%400},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?"string"==typeof a&&(a=this.lang().weekdaysParse(a),"number"!=typeof a)?this:this.add({d:a-b}):b},month:function(a){var b,c=this._isUTC?"UTC":"";return null!=a?"string"==typeof a&&(a=this.lang().monthsParse(a),"number"!=typeof a)?this:(b=this.date(),this.date(1),this._d["set"+c+"Month"](a),this.date(Math.min(b,this.daysInMonth())),H.updateOffset(this),this):this._d["get"+c+"Month"]()},startOf:function(a){switch(a=m(a)){case"year":this.month(0);case"month":this.date(1);case"week":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===a&&this.weekday(0),this},endOf:function(a){return this.startOf(a).add(a,1).subtract("ms",1)},isAfter:function(a,b){return b="undefined"!=typeof b?b:"millisecond",+this.clone().startOf(b)>+H(a).startOf(b)},isBefore:function(a,b){return b="undefined"!=typeof b?b:"millisecond",+this.clone().startOf(b)<+H(a).startOf(b)},isSame:function(a,b){return b="undefined"!=typeof b?b:"millisecond",+this.clone().startOf(b)===+H(a).startOf(b)},min:function(a){return a=H.apply(null,arguments),this>a?this:a},max:function(a){return a=H.apply(null,arguments),a>this?this:a},zone:function(a){var b=this._offset||0;return null==a?this._isUTC?b:this._d.getTimezoneOffset():("string"==typeof a&&(a=t(a)),Math.abs(a)<16&&(a=60*a),this._offset=a,this._isUTC=!0,b!==a&&j(this,H.duration(b-a,"m"),1,!0),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},daysInMonth:function(){return H.utc([this.year(),this.month()+1,0]).date()},dayOfYear:function(a){var b=K((H(this).startOf("day")-H(this).startOf("year"))/864e5)+1;return null==a?b:this.add("d",a-b)},weekYear:function(a){var b=C(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==a?b:this.add("y",a-b)},isoWeekYear:function(a){var b=C(this,1,4).year;return null==a?b:this.add("y",a-b)},week:function(a){var b=this.lang().week(this);return null==a?b:this.add("d",7*(a-b))},isoWeek:function(a){var b=C(this,1,4).week;return null==a?b:this.add("d",7*(a-b))},weekday:function(a){var b=(this._d.getDay()+7-this.lang()._week.dow)%7;return null==a?b:this.add("d",a-b)},isoWeekday:function(a){return null==a?this.day()||7:this.day(this.day()%7?a:a-7)},lang:function(b){return b===a?this._lang:(this._lang=o(b),this)}},I=0;I<cb.length;I++)E(cb[I].toLowerCase().replace(/s$/,""),cb[I]);E("year","FullYear"),H.fn.days=H.fn.day,H.fn.months=H.fn.month,H.fn.weeks=H.fn.week,H.fn.isoWeeks=H.fn.isoWeek,H.fn.toJSON=H.fn.toISOString,H.duration.fn=f.prototype={_bubble:function(){var a,b,c,d,e=this._milliseconds,f=this._days,g=this._months,i=this._data;i.milliseconds=e%1e3,a=h(e/1e3),i.seconds=a%60,b=h(a/60),i.minutes=b%60,c=h(b/60),i.hours=c%24,f+=h(c/24),i.days=f%30,g+=h(f/30),i.months=g%12,d=h(g/12),i.years=d},weeks:function(){return h(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+2592e6*(this._months%12)+31536e6*~~(this._months/12)},humanize:function(a){var b=+this,c=B(b,!a,this.lang());return a&&(c=this.lang().pastFuture(b,c)),this.lang().postformat(c)},add:function(a,b){var c=H.duration(a,b);return this._milliseconds+=c._milliseconds,this._days+=c._days,this._months+=c._months,this._bubble(),this},subtract:function(a,b){var c=H.duration(a,b);return this._milliseconds-=c._milliseconds,this._days-=c._days,this._months-=c._months,this._bubble(),this},get:function(a){return a=m(a),this[a.toLowerCase()+"s"]()},as:function(a){return a=m(a),this["as"+a.charAt(0).toUpperCase()+a.slice(1)+"s"]()},lang:H.fn.lang};for(I in db)db.hasOwnProperty(I)&&(G(I,db[I]),F(I.toLowerCase()));G("Weeks",6048e5),H.duration.fn.asMonths=function(){return(+this-31536e6*this.years())/2592e6+12*this.years()},H.lang("en",{ordinal:function(a){var b=a%10,c=1===~~(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c}}),M&&(module.exports=H),"undefined"==typeof ender&&(this.moment=H),"function"==typeof define&&define.amd&&define("moment",[],function(){return H})}.call(this),!function(a){var b=function(b,c,d){var e,f="object"==typeof c;this.startDate=moment().startOf("day"),this.endDate=moment().startOf("day"),this.minDate=!1,this.maxDate=!1,this.dateLimit=!1,this.showDropdowns=!1,this.showWeekNumbers=!1,this.timePicker=!1,this.timePickerIncrement=30,this.timePicker12Hour=!0,this.ranges={},this.opens="right",this.buttonClasses=["btn","btn-small"],this.applyClass="btn-success",this.cancelClass="btn-default",this.format="MM/DD/YYYY",this.separator=" - ",this.locale={applyLabel:"Apply",cancelLabel:"Cancel",fromLabel:"From",toLabel:"To",weekLabel:"W",customRangeLabel:"Custom Range",daysOfWeek:moment()._lang._weekdaysMin.slice(),monthNames:moment()._lang._monthsShort.slice(),firstDay:0},this.cb=function(){},this.parentEl="body",this.element=a(b),this.element.hasClass("pull-right")&&(this.opens="left"),this.element.is("input")?this.element.on({click:a.proxy(this.show,this),focus:a.proxy(this.show,this)}):this.element.on("click",a.proxy(this.show,this)),e=this.locale,f&&("object"==typeof c.locale&&a.each(e,function(a,b){e[a]=c.locale[a]||b}),c.applyClass&&(this.applyClass=c.applyClass),c.cancelClass&&(this.cancelClass=c.cancelClass));var g='<div class="daterangepicker dropdown-menu"><div class="calendar left"></div><div class="calendar right"></div><div class="ranges"><div class="range_inputs"><div class="daterangepicker_start_input" style="float: left"><label for="daterangepicker_start">'+this.locale.fromLabel+'</label><input class="input-mini" type="text" name="daterangepicker_start" value="" disabled="disabled" /></div><div class="daterangepicker_end_input" style="float: left; padding-left: 11px"><label for="daterangepicker_end">'+this.locale.toLabel+'</label><input class="input-mini" type="text" name="daterangepicker_end" value="" disabled="disabled" /></div><button class="'+this.applyClass+' applyBtn" disabled="disabled">'+this.locale.applyLabel+'</button>&nbsp;<button class="'+this.cancelClass+' cancelBtn">'+this.locale.cancelLabel+"</button></div></div></div>";if(this.parentEl=f&&c.parentEl&&a(c.parentEl)||a(this.parentEl),this.container=a(g).appendTo(this.parentEl),f){if("string"==typeof c.format&&(this.format=c.format),"string"==typeof c.separator&&(this.separator=c.separator),"string"==typeof c.startDate&&(this.startDate=moment(c.startDate,this.format)),"string"==typeof c.endDate&&(this.endDate=moment(c.endDate,this.format)),"string"==typeof c.minDate&&(this.minDate=moment(c.minDate,this.format)),"string"==typeof c.maxDate&&(this.maxDate=moment(c.maxDate,this.format)),"object"==typeof c.startDate&&(this.startDate=moment(c.startDate)),"object"==typeof c.endDate&&(this.endDate=moment(c.endDate)),"object"==typeof c.minDate&&(this.minDate=moment(c.minDate)),"object"==typeof c.maxDate&&(this.maxDate=moment(c.maxDate)),"object"==typeof c.ranges){for(var h in c.ranges){var i=moment(c.ranges[h][0]),j=moment(c.ranges[h][1]);this.minDate&&i.isBefore(this.minDate)&&(i=moment(this.minDate)),this.maxDate&&j.isAfter(this.maxDate)&&(j=moment(this.maxDate)),this.minDate&&j.isBefore(this.minDate)||this.maxDate&&i.isAfter(this.maxDate)||(this.ranges[h]=[i,j])}var k="<ul>";for(var h in this.ranges)k+="<li>"+h+"</li>";k+="<li>"+this.locale.customRangeLabel+"</li>",k+="</ul>",this.container.find(".ranges").prepend(k)}if("object"==typeof c.dateLimit&&(this.dateLimit=c.dateLimit),"object"==typeof c.locale&&("object"==typeof c.locale.daysOfWeek&&(this.locale.daysOfWeek=c.locale.daysOfWeek.slice()),"number"==typeof c.locale.firstDay)){this.locale.firstDay=c.locale.firstDay;for(var l=c.locale.firstDay;l>0;)this.locale.daysOfWeek.push(this.locale.daysOfWeek.shift()),l--}"string"==typeof c.opens&&(this.opens=c.opens),"boolean"==typeof c.showWeekNumbers&&(this.showWeekNumbers=c.showWeekNumbers),"string"==typeof c.buttonClasses&&(this.buttonClasses=[c.buttonClasses]),"object"==typeof c.buttonClasses&&(this.buttonClasses=c.buttonClasses),"boolean"==typeof c.showDropdowns&&(this.showDropdowns=c.showDropdowns),"boolean"==typeof c.timePicker&&(this.timePicker=c.timePicker),"number"==typeof c.timePickerIncrement&&(this.timePickerIncrement=c.timePickerIncrement),"boolean"==typeof c.timePicker12Hour&&(this.timePicker12Hour=c.timePicker12Hour)}this.timePicker||(this.startDate=this.startDate.startOf("day"),this.endDate=this.endDate.startOf("day"));var m=this.container;if(a.each(this.buttonClasses,function(a,b){m.find("button").addClass(b)
}),"right"==this.opens){var n=this.container.find(".calendar.left"),o=this.container.find(".calendar.right");n.removeClass("left").addClass("right"),o.removeClass("right").addClass("left")}if(("undefined"==typeof c||"undefined"==typeof c.ranges)&&(this.container.find(".calendar").show(),this.move()),"function"==typeof d&&(this.cb=d),this.container.addClass("opens"+this.opens),(!f||"undefined"==typeof c.startDate&&"undefined"==typeof c.endDate)&&a(this.element).is("input[type=text]")){var i,j,p=a(this.element).val(),q=p.split(this.separator);2==q.length&&(i=moment(q[0],this.format),j=moment(q[1],this.format)),null!=i&&null!=j&&(this.startDate=i,this.endDate=j)}this.oldStartDate=this.startDate.clone(),this.oldEndDate=this.endDate.clone(),this.leftCalendar={month:moment([this.startDate.year(),this.startDate.month(),1,this.startDate.hour(),this.startDate.minute()]),calendar:[]},this.rightCalendar={month:moment([this.endDate.year(),this.endDate.month(),1,this.endDate.hour(),this.endDate.minute()]),calendar:[]},this.container.on("mousedown",a.proxy(this.mousedown,this)),this.container.find(".calendar").on("click",".prev",a.proxy(this.clickPrev,this)).on("click",".next",a.proxy(this.clickNext,this)).on("click","td.available",a.proxy(this.clickDate,this)).on("mouseenter","td.available",a.proxy(this.enterDate,this)).on("mouseleave","td.available",a.proxy(this.updateFormInputs,this)).on("change","select.yearselect",a.proxy(this.updateMonthYear,this)).on("change","select.monthselect",a.proxy(this.updateMonthYear,this)).on("change","select.hourselect,select.minuteselect,select.ampmselect",a.proxy(this.updateTime,this)),this.container.find(".ranges").on("click","button.applyBtn",a.proxy(this.clickApply,this)).on("click","button.cancelBtn",a.proxy(this.clickCancel,this)).on("click",".daterangepicker_start_input,.daterangepicker_end_input",a.proxy(this.showCalendars,this)).on("click","li",a.proxy(this.clickRange,this)).on("mouseenter","li",a.proxy(this.enterRange,this)).on("mouseleave","li",a.proxy(this.updateFormInputs,this)),this.element.on("keyup",a.proxy(this.updateFromControl,this)),this.updateView(),this.updateCalendars()};b.prototype={constructor:b,mousedown:function(a){a.stopPropagation()},updateView:function(){this.leftCalendar.month.month(this.startDate.month()).year(this.startDate.year()),this.rightCalendar.month.month(this.endDate.month()).year(this.endDate.year()),this.updateFormInputs()},updateFormInputs:function(){this.container.find("input[name=daterangepicker_start]").val(this.startDate.format(this.format)),this.container.find("input[name=daterangepicker_end]").val(this.endDate.format(this.format)),this.startDate.isSame(this.endDate)||this.startDate.isBefore(this.endDate)?this.container.find("button.applyBtn").removeAttr("disabled"):this.container.find("button.applyBtn").attr("disabled","disabled")},updateFromControl:function(){if(this.element.is("input")&&this.element.val().length){var a=this.element.val().split(this.separator),b=moment(a[0],this.format),c=moment(a[1],this.format);null!=b&&null!=c&&(c.isBefore(b)||(this.oldStartDate=this.startDate.clone(),this.oldEndDate=this.endDate.clone(),this.startDate=b,this.endDate=c,this.startDate.isSame(this.oldStartDate)&&this.endDate.isSame(this.oldEndDate)||this.notify(),this.updateCalendars()))}},notify:function(){this.updateView(),this.cb(this.startDate,this.endDate)},move:function(){var b={top:this.parentEl.offset().top-(this.parentEl.is("body")?0:this.parentEl.scrollTop()),left:this.parentEl.offset().left-(this.parentEl.is("body")?0:this.parentEl.scrollLeft())};"left"==this.opens?(this.container.css({top:this.element.offset().top+this.element.outerHeight()-b.top,right:a(window).width()-this.element.offset().left-this.element.outerWidth()-b.left,left:"auto"}),this.container.offset().left<0&&this.container.css({right:"auto",left:9})):(this.container.css({top:this.element.offset().top+this.element.outerHeight()-b.top,left:this.element.offset().left-b.left,right:"auto"}),this.container.offset().left+this.container.outerWidth()>a(window).width()&&this.container.css({left:"auto",right:0}))},show:function(b){this.container.show(),this.move(),b&&(b.stopPropagation(),b.preventDefault()),a(document).on("mousedown",a.proxy(this.hide,this)),this.element.trigger("shown",{target:b.target,picker:this})},hide:function(){this.container.hide(),this.startDate.isSame(this.oldStartDate)&&this.endDate.isSame(this.oldEndDate)||this.notify(),this.oldStartDate=this.startDate.clone(),this.oldEndDate=this.endDate.clone(),a(document).off("mousedown",this.hide),this.element.trigger("hidden",{picker:this})},enterRange:function(a){var b=a.target.innerHTML;if(b==this.locale.customRangeLabel)this.updateView();else{var c=this.ranges[b];this.container.find("input[name=daterangepicker_start]").val(c[0].format(this.format)),this.container.find("input[name=daterangepicker_end]").val(c[1].format(this.format))}},showCalendars:function(){this.container.find(".calendar").show(),this.move()},updateInputText:function(){this.element.is("input")&&this.element.val(this.startDate.format(this.format)+this.separator+this.endDate.format(this.format))},clickRange:function(a){var b=a.target.innerHTML;if(b==this.locale.customRangeLabel)this.showCalendars();else{var c=this.ranges[b];this.startDate=c[0],this.endDate=c[1],this.timePicker||(this.startDate.startOf("day"),this.endDate.startOf("day")),this.leftCalendar.month.month(this.startDate.month()).year(this.startDate.year()).hour(this.startDate.hour()).minute(this.startDate.minute()),this.rightCalendar.month.month(this.endDate.month()).year(this.endDate.year()).hour(this.endDate.hour()).minute(this.endDate.minute()),this.updateCalendars(),this.updateInputText(),this.container.find(".calendar").hide(),this.hide()}},clickPrev:function(b){var c=a(b.target).parents(".calendar");c.hasClass("left")?this.leftCalendar.month.subtract("month",1):this.rightCalendar.month.subtract("month",1),this.updateCalendars()},clickNext:function(b){var c=a(b.target).parents(".calendar");c.hasClass("left")?this.leftCalendar.month.add("month",1):this.rightCalendar.month.add("month",1),this.updateCalendars()},enterDate:function(b){var c=a(b.target).attr("data-title"),d=c.substr(1,1),e=c.substr(3,1),f=a(b.target).parents(".calendar");f.hasClass("left")?this.container.find("input[name=daterangepicker_start]").val(this.leftCalendar.calendar[d][e].format(this.format)):this.container.find("input[name=daterangepicker_end]").val(this.rightCalendar.calendar[d][e].format(this.format))},clickDate:function(b){var c=a(b.target).attr("data-title"),d=c.substr(1,1),e=c.substr(3,1),f=a(b.target).parents(".calendar");if(f.hasClass("left")){var g=this.leftCalendar.calendar[d][e],h=this.endDate;if("object"==typeof this.dateLimit){var i=moment(g).add(this.dateLimit).startOf("day");h.isAfter(i)&&(h=i)}}else{var g=this.startDate,h=this.rightCalendar.calendar[d][e];if("object"==typeof this.dateLimit){var j=moment(h).subtract(this.dateLimit).startOf("day");g.isBefore(j)&&(g=j)}}f.find("td").removeClass("active"),g.isSame(h)||g.isBefore(h)?(a(b.target).addClass("active"),this.startDate=g,this.endDate=h):g.isAfter(h)&&(a(b.target).addClass("active"),this.startDate=g,this.endDate=moment(g).add("day",1).startOf("day")),this.leftCalendar.month.month(this.startDate.month()).year(this.startDate.year()),this.rightCalendar.month.month(this.endDate.month()).year(this.endDate.year()),this.updateCalendars()},clickApply:function(){this.updateInputText(),this.hide()},clickCancel:function(){this.startDate=this.oldStartDate,this.endDate=this.oldEndDate,this.updateView(),this.updateCalendars(),this.hide()},updateMonthYear:function(b){var c=a(b.target).closest(".calendar").hasClass("left"),d=this.container.find(".calendar.left");c||(d=this.container.find(".calendar.right"));var e=parseInt(d.find(".monthselect").val(),10),f=d.find(".yearselect").val();c?this.leftCalendar.month.month(e).year(f):this.rightCalendar.month.month(e).year(f),this.updateCalendars()},updateTime:function(b){var c=a(b.target).closest(".calendar").hasClass("left"),d=this.container.find(".calendar.left");c||(d=this.container.find(".calendar.right"));var e=parseInt(d.find(".hourselect").val()),f=parseInt(d.find(".minuteselect").val());if(this.timePicker12Hour){var g=d.find(".ampmselect").val();"PM"==g&&12>e&&(e+=12),"AM"==g&&12==e&&(e=0)}if(c){var h=this.startDate.clone();h.hour(e),h.minute(f),this.startDate=h,this.leftCalendar.month.hour(e).minute(f)}else{var i=this.endDate.clone();i.hour(e),i.minute(f),this.endDate=i,this.rightCalendar.month.hour(e).minute(f)}this.updateCalendars()},updateCalendars:function(){this.leftCalendar.calendar=this.buildCalendar(this.leftCalendar.month.month(),this.leftCalendar.month.year(),this.leftCalendar.month.hour(),this.leftCalendar.month.minute(),"left"),this.rightCalendar.calendar=this.buildCalendar(this.rightCalendar.month.month(),this.rightCalendar.month.year(),this.rightCalendar.month.hour(),this.rightCalendar.month.minute(),"right"),this.container.find(".calendar.left").html(this.renderCalendar(this.leftCalendar.calendar,this.startDate,this.minDate,this.maxDate)),this.container.find(".calendar.right").html(this.renderCalendar(this.rightCalendar.calendar,this.endDate,this.startDate,this.maxDate)),this.container.find(".ranges li").removeClass("active");var a=!0,b=0;for(var c in this.ranges)this.timePicker?this.startDate.isSame(this.ranges[c][0])&&this.endDate.isSame(this.ranges[c][1])&&(a=!1,this.container.find(".ranges li:eq("+b+")").addClass("active")):this.startDate.format("YYYY-MM-DD")==this.ranges[c][0].format("YYYY-MM-DD")&&this.endDate.format("YYYY-MM-DD")==this.ranges[c][1].format("YYYY-MM-DD")&&(a=!1,this.container.find(".ranges li:eq("+b+")").addClass("active")),b++;a&&this.container.find(".ranges li:last").addClass("active")},buildCalendar:function(a,b,c,d){for(var e=moment([b,a,1]),f=moment(e).subtract("month",1).month(),g=moment(e).subtract("month",1).year(),h=moment([g,f]).daysInMonth(),i=e.day(),j=[],k=0;6>k;k++)j[k]=[];var l=h-i+this.locale.firstDay+1;l>h&&(l-=7),i==this.locale.firstDay&&(l=h-6);for(var m=moment([g,f,l,12,d]),k=0,n=0,o=0;42>k;k++,n++,m=moment(m).add("hour",24))k>0&&n%7==0&&(n=0,o++),j[o][n]=m.clone().hour(c),m.hour(12);return j},renderDropdowns:function(a,b,c){for(var d=a.month(),e='<select class="monthselect">',f=!1,g=!1,h=0;12>h;h++)(!f||h>=b.month())&&(!g||h<=c.month())&&(e+="<option value='"+h+"'"+(h===d?" selected='selected'":"")+">"+this.locale.monthNames[h]+"</option>");e+="</select>";for(var i=a.year(),j=c&&c.year()||i+5,k=b&&b.year()||i-50,l='<select class="yearselect">',m=k;j>=m;m++)l+='<option value="'+m+'"'+(m===i?' selected="selected"':"")+">"+m+"</option>";return l+="</select>",e+l},renderCalendar:function(b,c,d,e){var f='<div class="calendar-date">';f+='<table class="table-condensed">',f+="<thead>",f+="<tr>",this.showWeekNumbers&&(f+="<th></th>"),f+=!d||d.isBefore(b[1][1])?'<th class="prev available"><i class="icon-arrow-left glyphicon glyphicon-arrow-left"></i></th>':"<th></th>";var g=this.locale.monthNames[b[1][1].month()]+b[1][1].format(" YYYY");this.showDropdowns&&(g=this.renderDropdowns(b[1][1],d,e)),f+='<th colspan="5" style="width: auto">'+g+"</th>",f+=!e||e.isAfter(b[1][1])?'<th class="next available"><i class="icon-arrow-right glyphicon glyphicon-arrow-right"></i></th>':"<th></th>",f+="</tr>",f+="<tr>",this.showWeekNumbers&&(f+='<th class="week">'+this.locale.weekLabel+"</th>"),a.each(this.locale.daysOfWeek,function(a,b){f+="<th>"+b+"</th>"}),f+="</tr>",f+="</thead>",f+="<tbody>";for(var h=0;6>h;h++){f+="<tr>",this.showWeekNumbers&&(f+='<td class="week">'+b[h][0].week()+"</td>");for(var i=0;7>i;i++){var j="available ";j+=b[h][i].month()==b[1][1].month()?"":"off",d&&b[h][i].isBefore(d)||e&&b[h][i].isAfter(e)?j=" off disabled ":b[h][i].format("YYYY-MM-DD")==c.format("YYYY-MM-DD")?(j+=" active ",b[h][i].format("YYYY-MM-DD")==this.startDate.format("YYYY-MM-DD")&&(j+=" start-date "),b[h][i].format("YYYY-MM-DD")==this.endDate.format("YYYY-MM-DD")&&(j+=" end-date ")):b[h][i]>=this.startDate&&b[h][i]<=this.endDate&&(j+=" in-range ",b[h][i].isSame(this.startDate)&&(j+=" start-date "),b[h][i].isSame(this.endDate)&&(j+=" end-date "));var k="r"+h+"c"+i;f+='<td class="'+j.replace(/\s+/g," ").replace(/^\s?(.*?)\s?$/,"$1")+'" data-title="'+k+'">'+b[h][i].date()+"</td>"}f+="</tr>"}if(f+="</tbody>",f+="</table>",f+="</div>",this.timePicker){f+='<div class="calendar-time">',f+='<select class="hourselect">';var l=0,m=23,n=c.hour();this.timePicker12Hour&&(l=1,m=12,n>=12&&(n-=12),0==n&&(n=12));for(var o=l;m>=o;o++)f+=o==n?'<option value="'+o+'" selected="selected">'+o+"</option>":'<option value="'+o+'">'+o+"</option>";f+="</select> : ",f+='<select class="minuteselect">';for(var o=0;60>o;o+=this.timePickerIncrement){var p=o;10>p&&(p="0"+p),f+=o==c.minute()?'<option value="'+o+'" selected="selected">'+p+"</option>":'<option value="'+o+'">'+p+"</option>"}f+="</select> ",this.timePicker12Hour&&(f+='<select class="ampmselect">',f+=c.hour()>=12?'<option value="AM">AM</option><option value="PM" selected="selected">PM</option>':'<option value="AM" selected="selected">AM</option><option value="PM">PM</option>',f+="</select>"),f+="</div>"}return f}},a.fn.daterangepicker=function(c,d){return this.each(function(){var e=a(this);e.data("daterangepicker")||e.data("daterangepicker",new b(e,c,d))}),this}}(window.jQuery),angular.module("theHomePassApp").config(["$stateProvider",function(a){a.state("signupAdvertiser",{url:"/advertiser/signup",templateUrl:"app/advertiser/account/signup/signup.html",controller:"SignupAdvertiserCtrl"}).state("loginAdvertiser",{url:"/advertiser/login",templateUrl:"app/advertiser/account/login/login.html",controller:"LoginAdvertiserCtrl"})}]),angular.module("theHomePassApp").controller("PosCtrl",["$scope","pos","Restangular","Modal","$rootScope","$upload","GoogleMapApi".ns(),function(a,b,c,d,e,f,g){a.pos=b,a.selected={},g.then(function(b){var c=new b.Geocoder;a.map={center:{latitude:48.89670230000001,longitude:2.3183781999999997},zoom:8},a.$watch("selected.address",function(){angular.element("#address").val(a.selected?a.selected.address:null)}),a.events={map:{click:function(d,e,f){c.geocode({latLng:f[0].latLng},function(c,d){d==b.GeocoderStatus.OK&&c[0]&&(a.current&&a.current.setIcon(null),a.selected={latitude:c[0].geometry.location.k,longitude:c[0].geometry.location.B,address:c[0].formatted_address},a.$apply())})}},markers:{click:function(b,c,d){a.current&&a.current.setIcon(null),a.current=b,a.selected=d,b.setIcon("http://maps.google.com/mapfiles/ms/icons/green-dot.png")}},search:{places_changed:function(b){var c=b.getPlaces()[0];void 0!==c&&(a.current&&a.current.setIcon(null),a.selected.address=c.formatted_address,a.selected.latitude=c.geometry.location.k,a.selected.longitude=c.geometry.location.B,a.map.center={latitude:c.geometry.location.k,longitude:c.geometry.location.B})}}}}),a.onFileSelect=function(b){a.upload=f.upload({url:"api/uploads/",file:b[0]}).success(function(b){a.selected.image=b.path,a.$apply()})},a.clickMarker=function(b){a.selected=b,a.$apply()},a.confirmation=d.confirm.delete(function(){a.selected.remove().then(function(){a.pos=_.without(a.pos,a.selected),a.selected=null})});var h=c.all("pos");a.send=function(b){b.$valid&&(a.selected._id?a.selected.put():h.post(a.selected).then(function(b){a.pos.push(b),a.selected=null}))}}]),angular.module("theHomePassApp").config(["$stateProvider",function(a){a.state("pos",{url:"/advertiser/pos",templateUrl:"app/advertiser/pos/pos.html",controller:"PosCtrl",authenticate:!0,resolve:{pos:["Restangular",function(a){return a.all("pos").getList()}]}})}]),angular.module("theHomePassApp").controller("MainCtrl",["$scope","$rootScope","pos","ads","categories","Auth","GoogleMapApi".ns(),function(a,b,c,d,e,f,g){a.pos=c,a.ads=d,a.categories=e,a.selected={},a.range=0,g.then(function(){a.map={center:{latitude:f.getCurrentUser().from.latitude,longitude:f.getCurrentUser().from.longitude},zoom:13},a.events={click:function(b,c,e){a.ads=_.where(d,{pos:[e._id]})}}}),console.log(f.getCurrentUser().from.address),a.changeLocation=function(){a.map.center=a.location?{latitude:f.getCurrentUser().from.latitude,longitude:f.getCurrentUser().from.longitude}:{latitude:f.getCurrentUser().to.latitude,longitude:f.getCurrentUser().to.longitude},a.location=!a.location};var h;$("#range").ionRangeSlider({min:2,max:50,type:"single",step:2,postfix:"km",onChange:function(b){a.range=b.fromNumber,a.circle={stroke:{color:"#ff",weight:2,opacity:.5},fill:{color:"#ff",opacity:.25},center:{latitude:coords.latitude,longitude:coords.longitude}},a.pos=_.filter(c,function(b){return h=geolib.getDistance({latitude:b.latitude,longitude:b.longitude},{latitude:f.getCurrentUser().from.latitude,longitude:f.getCurrentUser().from.longitude}),1e3*a.range-h>=0}),a.$apply()}})}]),angular.module("theHomePassApp").config(["$stateProvider",function(a){a.state("main",{url:"/",templateUrl:"app/main/main.html",controller:"MainCtrl",authenticate:!0,resolve:{pos:["Restangular",function(a){return a.all("pos").getList()}],ads:["Restangular",function(a){return a.all("ads").getList()}],categories:["Restangular",function(a){return a.all("categories").getList()}]}})}]),angular.module("theHomePassApp").factory("Auth",["$location","$rootScope","$http","User","$cookieStore","$q","Restangular",function(a,b,c,d,e,f){var g={};return e.get("token")&&(g=d.get()),{pass:function(a,b){var h=(b||angular.noop,f.defer());return c.post("/auth/pass",{pass:a.pass}).success(function(a){e.put("token",a.token),g=d.get(),h.resolve(a)}).catch(function(){h.reject()}),h.promise},login:function(a,b){var h=b||angular.noop,i=f.defer();return c.post("/auth/local",{email:a.email,password:a.password}).success(function(a){return e.put("token",a.token),g=d.get(),i.resolve(a),h()}).error(function(a){return this.logout(),i.reject(a),h(a)}.bind(this)),i.promise},logout:function(){e.remove("token"),g={}},createUser:function(a,b){var c=b||angular.noop;return d.save(a,function(b){return e.put("token",b.token),g=d.get(),c(a)},function(a){return this.logout(),c(a)}.bind(this)).$promise},changePassword:function(a,b,c){var e=c||angular.noop;return d.changePassword({id:g._id},{oldPassword:a,newPassword:b},function(a){return e(a)},function(a){return e(a)}).$promise},getCurrentUser:function(){return g},isLoggedIn:function(){return g.hasOwnProperty("role")},isLoggedInAsync:function(a){g.hasOwnProperty("$promise")?g.$promise.then(function(){a(!0)}).catch(function(){a(!1)}):a(g.hasOwnProperty("role")?!0:!1)},isAdmin:function(){return"admin"===g.role},hasRole:function(a){return g.role===a},getToken:function(){return e.get("token")}}}]),angular.module("theHomePassApp").factory("User",["$resource",function(a){return a("/api/users/:id/:controller",{id:"@_id"},{changePassword:{method:"PUT",params:{controller:"password"}},get:{method:"GET",params:{id:"me"}}})}]),angular.module("theHomePassApp").directive("ngTable",["$filter","$rootScope",function(a,b){return{templateUrl:function(a,b){return"components/data-table/"+b.type+".html"},restrict:"EA",scope:{model:"=",cols:"="},link:function(c){c.numItems=10,c.currentStart=1,c.currentEnd=c.numItems,c.currentPage=1,c.reload=function(){c.currentStart=(c.currentPage-1)*c.numItems,c.currentEnd=c.currentPage*c.numItems,c.currentEnd>c.model.length&&(c.currentEnd=c.model.length),c.current=c.model.slice(c.currentStart,c.currentEnd)},c.update=function(a){b.$emit("update",a)},c.delete=function(a){b.$emit("delete",a)};var d=a("filter");c.$watch("search",function(){c.items=d(c.model,c.search)}),c.$watch("model",function(){c.reload()});var e=a("orderBy");c.order=function(a){c.predicate===a?(c.reverse=!c.reverse,c.current=e(c.current,a,c.reverse)):(c.predicate=a,c.reverse=!1,c.current=e(c.current,c.predicate))}}}}]),angular.module("theHomePassApp").directive("geoSearch",function(){return{templateUrl:"components/geo-search/geo-search.html",restrict:"EA",scope:{model:"=",event:"&"},link:function(a){a.initialize=function(){var b=(new google.maps.Geocoder,document.getElementById("search")),c=new google.maps.places.SearchBox(b);google.maps.event.addListener(c,"places_changed",function(){var b=c.getPlaces()[0];void 0!==b&&(a.model.address=b.formatted_address,a.model.lat=b.geometry.location.k,a.model.lng=b.geometry.location.B,a.event())})},google.maps.event.addDomListener(window,"load",a.initialize())}}}),angular.module("theHomePassApp").factory("Modal",["$rootScope","$modal",function(a,b){function c(c,d){var e=a.$new();return c=c||{},d=d||"modal-default",angular.extend(e,c),b.open({templateUrl:"components/modal/modal.html",windowClass:d,scope:e})}return{confirm:{"delete":function(a){return a=a||angular.noop,function(){var b,d=Array.prototype.slice.call(arguments),e=d.shift();b=c({modal:{dismissable:!0,title:"Confirmation",html:"<p>Êtes vous certain de vouloir supprimer <strong>"+e+"</strong> ?</p>",buttons:[{classes:"btn-danger",text:"Supprimer",click:function(a){b.close(a)}},{classes:"btn-default",text:"Annuler",click:function(a){b.dismiss(a)}}]}},"modal-danger"),b.result.then(function(b){a.apply(b,d)})}}}}}]),angular.module("theHomePassApp").directive("mongooseError",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){b.on("keydown",function(){return d.$setValidity("mongoose",!0)})}}}),angular.module("theHomePassApp").controller("NavbarCtrl",["$scope","$rootScope","Auth","$state",function(a,b,c,d){a.menu=[{title:"Home",link:"/"}],a.Auth=c,a.isCollapsed=!0,a.isLoggedIn=c.isLoggedIn,a.getCurrentUser=c.getCurrentUser,a.user={},a.login=function(b){b.$valid&&c.login({email:a.user.email,password:a.user.password}).then(function(){d.go("main")}).catch(function(){})},a.logout=function(){c.logout(),$location.path("/login")}}]),angular.module("theHomePassApp").factory("socket",["socketFactory",function(a){var b=io("",{path:"/socket.io-client"}),c=a({ioSocket:b});return{socket:c,syncUpdates:function(a,b,d){d=d||angular.noop,c.on(a+":save",function(a){var c=_.find(b,{_id:a._id}),e=b.indexOf(c),f="created";c?(b.splice(e,1,a),f="updated"):b.push(a),d(f,a,b)}),c.on(a+":remove",function(a){var c="deleted";_.remove(b,{_id:a._id}),d(c,a,b)})},unsyncUpdates:function(a){c.removeAllListeners(a+":save"),c.removeAllListeners(a+":remove")}}}]),angular.module("theHomePassApp").run(["$templateCache",function(a){a.put("app/account/login/login.html",'<div ng-include=&quot;components/navbar/navbar.html&quot;></div><div class=form-box><div class=header>Se connecter</div><form name=form ng-submit=login(form) novalidate><div class="body bg-gray"><div ng-class="{&quot;has-error&quot;: error}" class=form-group><label ng-if=error for=pass class=control-label><i class="fa fa-times-circle-o"></i> Pass incorrect</label><input id=pass name=pass ng-model=user.pass placeholder="Entrez votre numéro de Pass" required class="form-control"></div></div><div class=footer><button type=submit class="btn bg-olive btn-block">Connexion</button><a ui-sref=signupAdvertiser()>Inscription</a></div></form></div>'),a.put("app/account/settings/settings.html",'<div ng-include=&quot;components/navbar/navbar.html&quot;></div><div class=container><div class=row><div class=col-sm-12><h1>Change Password</h1></div><div class=col-sm-12><form name=form ng-submit=changePassword(form) novalidate class=form><div class=form-group><label>Current Password</label><input type=password name=password ng-model=user.oldPassword mongoose-error="" class="form-control"><p ng-show=form.password.$error.mongoose class=help-block>{{ errors.other }}</p></div><div class=form-group><label>New Password</label><input type=password name=newPassword ng-model=user.newPassword ng-minlength=3 required class="form-control"><p ng-show="(form.newPassword.$error.minlength || form.newPassword.$error.required) &amp;&amp; (form.newPassword.$dirty || submitted)" class=help-block>Password must be at least 3 characters.</p></div><p class=help-block>{{ message }}</p><button type=submit class="btn btn-lg btn-primary">Save changes</button></form></div></div></div>'),a.put("app/account/signup/signup.html",'<div ng-include=&quot;components/navbar/navbar.html&quot;></div><div class=container><div class=row><div class=col-sm-12><h1>Sign up</h1></div><div class=col-sm-12><form name=form ng-submit=register(form) novalidate class=form><div ng-class="{ &quot;has-success&quot;: form.name.$valid &amp;&amp; submitted,        &quot;has-error&quot;: form.name.$invalid &amp;&amp; submitted }" class=form-group><label>Name</label><input name=name ng-model=user.name required class="form-control"><p ng-show="form.name.$error.required &amp;&amp; submitted" class=help-block>A name is required</p></div><div ng-class="{ &quot;has-success&quot;: form.email.$valid &amp;&amp; submitted,        &quot;has-error&quot;: form.email.$invalid &amp;&amp; submitted }" class=form-group><label>Email</label><input type=email name=email ng-model=user.email required mongoose-error="" class="form-control"><p ng-show="form.email.$error.email &amp;&amp; submitted" class=help-block>Doesn\'t look like a valid email.</p><p ng-show="form.email.$error.required &amp;&amp; submitted" class=help-block>What\'s your email address?</p><p ng-show=form.email.$error.mongoose class=help-block>{{ errors.email }}</p></div><div ng-class="{ &quot;has-success&quot;: form.password.$valid &amp;&amp; submitted,        &quot;has-error&quot;: form.password.$invalid &amp;&amp; submitted }" class=form-group><label>Password</label><input type=password name=password ng-model=user.password ng-minlength=3 required mongoose-error="" class="form-control"><p ng-show="(form.password.$error.minlength || form.password.$error.required) &amp;&amp; submitted" class=help-block>Password must be at least 3 characters.</p><p ng-show=form.password.$error.mongoose class=help-block>{{ errors.password }}</p></div><div><button type=submit class="btn btn-inverse btn-lg btn-login">Sign up</button> <a href=/login class="btn btn-default btn-lg btn-register">Login</a></div></form></div></div><hr></div>'),a.put("app/admin/ad/ad.html",'<div ng-include=&quot;components/navbar/navbar.html&quot;></div><div class="wrapper row-offcanvas row-offcanvas-left"><aside class="left-side sidebar-offcanvas"><div ng-include=&quot;components/sidebar/sidebar.html&quot;></div></aside><aside class=right-side><section class=content-header><h1>Annonces</h1></section><section class=content><div class=row><div class=col-xs-12><ng-table model=ads type=ad></ng-table></div></div></section></aside></div><script type=text/ng-template id=modal.html><div class="modal-primary"><div class="modal-header"><button type="button" ng-click="$dismiss()" class="close">&times;</button><h4 class="modal-title">{{ ad._id && \'Modifier une annonce\' || \'Ajouter une nouvelle annonce\'}}</h4></div><div class="modal-body"><form class="form"><div class="input-form"><label>Auteur</label><p>{{ad.author}}</p></div><div class="input-form"><label>Catégorie</label><input type="text" ng-model="ad.category" class="form-control"/></div><div class="input-form"><label>Montant</label><input type="text" ng-model="ad.value" class="form-control"/></div><div class="input-form"><label>Date de fin</label><input type="text" ng-model="ad.end" class="form-control"/></div><div class="input-form"><label>Status</label><select></select></div></form></div><div class="modal-footer"><button ng-click="$close()" class="btn btn-primary">{{ category._id && \'Modifier\' || \'Ajouter\'}}</button><button ng-click="$dismiss()" class="btn btn-default">Annuler</button></div></div></script><script type=text/ng-template id=confirm.html><div class="modal-danger"><div class="modal-header"><button type="button" ng-click="$dismiss()" class="close">&times;</button><h4 class="modal-title">Confirmation</h4></div><div class="modal-body"><p>Êtes vous certain de vouloir supprimer cette annonce ?</p></div><div class="modal-footer"><button ng-click="$close()" class="btn btn-danger">Supprimer</button><button ng-click="$dismiss()" class="btn btn-default">Annuler</button></div></div></script>'),a.put("app/admin/admin.html",'<div ng-include=&quot;components/navbar/navbar.html&quot;></div><div class="wrapper row-offcanvas row-offcanvas-left"><aside class="left-side sidebar-offcanvas"><div ng-include=&quot;components/sidebar/sidebar.html&quot;></div></aside><aside class=right-side><section class=content-header><h1>Dashboard</h1></section></aside></div>'),a.put("app/admin/category/category.html",'<div ng-include=&quot;components/navbar/navbar.html&quot;></div><div class="wrapper row-offcanvas row-offcanvas-left"><aside class="left-side sidebar-offcanvas"><div ng-include=&quot;components/sidebar/sidebar.html&quot;></div></aside><aside class=right-side><section class=content-header><h1>Catégories<button ng-click=create() class="btn btn-sm btn-primary pull-right btn-flat"><i class="fa fa-plus"></i><span>Ajouter</span></button></h1></section><section class=content><div class=row><div class=col-xs-12><ng-table model=categories type=category></ng-table></div></div></section></aside></div><script type=text/ng-template id=modal.html><div class="modal-primary"><div class="modal-header"><button type="button" ng-click="$dismiss()" class="close">&times;</button><h4 class="modal-title">{{ category._id && \'Modifier une catégorie\' || \'Ajouter une nouvelle catégorie\'}}</h4></div><div class="modal-body"><form class="form"><div class="input-form"><label>Nom</label><input type="text" ng-model="category.name" class="form-control"/></div></form></div><div class="modal-footer"><button ng-click="$close()" class="btn btn-primary">{{ category._id && \'Modifier\' || \'Ajouter\'}}</button><button ng-click="$dismiss()" class="btn btn-default">Annuler</button></div></div></script><script type=text/ng-template id=confirm.html><div class="modal-danger"><div class="modal-header"><button type="button" ng-click="$dismiss()" class="close">&times;</button><h4 class="modal-title">Confirmation</h4></div><div class="modal-body"><p>Êtes vous certain de vouloir supprimer<strong> {{category.name}} ?</strong></p></div><div class="modal-footer"><button ng-click="$close()" class="btn btn-danger">Supprimer</button><button ng-click="$dismiss()" class="btn btn-default">Annuler</button></div></div></script>'),a.put("app/admin/user/user.html",'<div ng-include=&quot;components/navbar/navbar.html&quot;></div><div class="wrapper row-offcanvas row-offcanvas-left"><aside class="left-side sidebar-offcanvas"><div ng-include=&quot;components/sidebar/sidebar.html&quot;></div></aside><aside class=right-side><section class=content-header><h1>Utilisateurs<button ng-click=create() class="btn btn-sm btn-primary pull-right"><i class="fa fa-plus"></i><span>Ajouter</span></button></h1></section><section class=content><div class=row><div class=col-xs-12><ng-table model=users type=user></ng-table></div></div></section></aside></div><script type=text/ng-template id=modal.html><div class="modal-primary"><div class="modal-header"><button type="button" ng-click="$dismiss()" class="close">&times;</button><h4 class="modal-title">Ajouter un nouvel utilisateur</h4></div><div class="modal-body"><form name="form"><div class="form-group"><label>Nom</label><input type="text" ng-model="user.name" required="" class="form-control"/></div><div class="form-group"><label>Numéro</label><input type="text" ng-model="user.phone" class="form-control"/></div><div class="form-group"><label>Adresse email</label><input type="email" ng-model="user.email" class="form-control"/></div><div class="form-group"><label>Mot de passe</label><div class="input-group"><input type="text" ng-model="user.pass" required="" class="form-control"/><span class="input-group-btn"><button type="button" ng-click="refresh()" class="btn btn-default"><i class="fa fa-refresh"></i></button></span></div></div><div class="form-group"><label>Déménage de l\'adresse</label><div id="from"></div></div><div class="form-group"><label>Emménage à l\'adresse</label><div id="to"></div></div><ui-gmap-google-map center="map.center" zoom="map.zoom" events="map.events" refresh="true" style="z-index: -1000;"><ui-gmap-search-box template="&quot;search-box-from.html&quot;" parentdiv="&quot;from&quot;" events="events.from"></ui-gmap-search-box><ui-gmap-search-box template="&quot;search-box-to.html&quot;" parentdiv="&quot;to&quot;" events="events.to"></ui-gmap-search-box><ui-gmap-marker idKey="&quot;from&quot;" coords="user.from"></ui-gmap-marker><ui-gmap-marker idKey="&quot;to&quot;" coords="user.to"></ui-gmap-marker></ui-gmap-google-map></form></div><div class="modal-footer"><button ng-click="$close()" class="btn btn-primary">{{ user._id && \'Modifier\' || \'Ajouter\'}}</button><button ng-click="$dismiss()" class="btn btn-default">Annuler</button></div></div></script><script type=text/ng-template id=confirm.html><div class="modal-danger"><div class="modal-header"><button type="button" ng-click="$dismiss()" class="close">&times;</button><h4 class="modal-title">Confirmation</h4></div><div class="modal-body"><p>Êtes vous certain de vouloir supprimer<strong> {{user.name}} ?</strong></p></div><div class="modal-footer"><button ng-click="$close()" class="btn btn-danger">Supprimer</button><button ng-click="$dismiss()" class="btn btn-default">Annuler</button></div></div></script><script type=text/ng-template id=search-box-from.html><input id="from_input" type="text" required="" placeHolder="Entrez votre recherche" ng-value="user.to.address" class="form-control"/></script><script type=text/ng-template id=search-box-to.html><input id="to_input" type="text" required="" placeHolder="Entrez votre recherche" class="form-control"/></script>'),a.put("app/advertiser/account/login/login.html",'<div ng-include=&quot;components/navbar/navbar.html&quot;></div><div class=form-box><div class=header>Se connecter</div><form name=form ng-submit=login(form) novalidate><div class="body bg-gray"><div class=form-group><input type=email name=email ng-model=user.email placeholder="Adresse Email" required class="form-control"></div><div class=form-group><input type=password name=password ng-model=user.password placeholder="Mot de passe" required class="form-control"></div></div><div class=footer><button type=submit class="btn bg-olive btn-block">Connexion</button><a ui-sref=signupAdvertiser()>Inscription</a></div></form></div>'),a.put("app/advertiser/account/signup/signup.html",'<div ng-include=&quot;components/navbar/navbar.html&quot;></div><div class=form-box><div class=header>S\'inscrire</div><form name=form ng-submit=login(form) novalidate><div class="body bg-gray"><div class=form-group><input name=last_name ng-model=user.email placeholder=Nom required class="form-control"></div><div class=form-group><input name=first_name ng-model=user.email placeholder=Prénom required class="form-control"></div><div class=form-group><input name="" ng-model=user.email placeholder="No. Siret" required class="form-control"></div><div class=form-group><input type=email name=email ng-model=user.email placeholder="Adresse Email" required class="form-control"></div><div class=form-group><input type=password name=password ng-model=user.password placeholder="Mot de passe" required class="form-control"></div><div class=form-group><input type=password name=re_password ng-model=user.rePass placeholder="Retapez le mot de passe" required class="form-control"></div></div><div class=footer><button type=submit class="btn bg-olive btn-block">Inscription</button><a ui-sref=loginAdvertiser()>Connexion</a></div></form></div>'),a.put("app/advertiser/ad/ad.html",'<div ng-include=&quot;components/navbar/navbar.html&quot;></div><div class=container><div class=row><div class=col-md-6><h3>Ajouter une annonce</h3><form enctype=multipart/form-data name=form><div class=form-group><label>Points de vente</label><input ng-model=ad.pos selectize=config options=pos required name=pos ng-change="posSelected()"><!-- .alert.alert-danger(ng-show=\'form.pos.$error.required\') Vous devez choisir au moins 1 point de vente.--></div><div class=form-group><label>Distance</label><div class=input-group><input type=number ng-model=ad.area required class="form-control"><span class=input-group-addon>km</span></div></div><div class=form-group><label>Image</label><input type=file ng-file-select=onFileSelect($files) accept="image/*"></div><div class=form-group><label>Categorie</label><select ng-model=ad.category ng-options="category._id as category.name for category in categories" required class=form-control></select></div><label>Montant</label><div class=form-group><label class=radio-inline><input type=radio ng-model=ad.type value="percent">Pourcentage</label><label class=radio-inline><input type=radio ng-model=ad.type value="euro">Euro</label><div ng-if="ad.type == &quot;percent&quot;" class=input-group><input type=number ng-model=ad.value max=100 min=1 required class="form-control"><span class=input-group-addon>%</span></div><div ng-if="ad.type == &quot;euro&quot;" class=input-group><input type=number ng-model=ad.value min=1 required placeholder=50 class="form-control"><span class=input-group-addon>€</span></div></div><div class=form-group><label>Date de fin</label><div class=input-group><span class=input-group-addon><i class="fa fa-calendar"></i></span><input type=date ng-model=ad.end required class="form-control"></div></div><div class=form-group><label>Annonce</label><textarea ng-model=ad.info rows=5 required class=form-control></textarea></div><input ng-click=send(form) type=submit value="{{ ad._id &amp;&amp; \'Modifier\' || \'Ajouter\'}}" class="btn btn-primary"><span ng-if=ad._id ng-click=$modal.openModal($scope) class="btn btn-danger pull-right">Supprimer</span></form></div><div class=col-md-6><br><br><br><br><ui-gmap-google-map center=map.center zoom=map.zoom><ui-gmap-markers models=pos idkey=&quot;_id&quot; coords=&quot;self&quot; events=events icon=&quot;icon&quot;></ui-gmap-markers><ui-gmap-circle ng-repeat="item in circles" center=item radius="ad.area * 1000" stroke=circle.stroke fill=circle.fill></ui-gmap-circle></ui-gmap-google-map></div></div></div>'),a.put("app/advertiser/pos/pos.html",'<div ng-include=&quot;components/navbar/navbar.html&quot;></div><div class=container><div class=row><div class=col-md-6><h3>Ajouter un point de vente</h3><form enctype=multipart/form-data name=form><div class=form-group><label>Nom</label><input ng-model=selected.name required class="form-control"></div><div class=form-group><label>Adresse</label><div id=search></div></div><div class=form-group><label>Image</label><input type=file ng-file-select=onFileSelect($files) accept="image/*"></div><div class=form-group><label>Informations</label><textarea ng-model=selected.info rows=5 required class=form-control></textarea></div><input ng-click=send(form) type=submit value="{{ selected._id &amp;&amp; \'Modifier\' || \'Ajouter\'}}" class="btn btn-primary"><span ng-if=selected._id ng-click=confirmation(selected.name) class="btn btn-danger pull-right">Supprimer</span></form></div><div class=col-md-6><br><br><br><br><ui-gmap-google-map center=map.center zoom=map.zoom events=events.map><ui-gmap-search-box template=&quot;search-box.html&quot; parentdiv=&quot;search&quot; events=events.search></ui-gmap-search-box><ui-gmap-markers models=pos idkey=&quot;_id&quot; coords=&quot;self&quot; events=events.markers></ui-gmap-markers><ui-gmap-marker idkey=1 coords=selected icon=&quot;http://maps.google.com/mapfiles/ms/icons/green-dot.png&quot;></ui-gmap-marker></ui-gmap-google-map></div></div></div><script type=text/ng-template id=search-box.html><input id="address" type="text" required="" placeHolder="Entrez votre recherche" class="form-control"/></script>'),a.put("app/main/main.html",'<div ng-include=&quot;components/navbar/navbar.html&quot;></div><div class=container-fluid><div class=row><div class=col-md-6><ui-gmap-google-map center=map.center zoom=map.zoom><ui-gmap-markers models=pos idkey=&quot;_id&quot; coords=&quot;self&quot; events=events></ui-gmap-markers><ui-gmap-circle center=circle.center radius="range * 1000" stroke=circle.stroke fill=circle.fill></ui-gmap-circle></ui-gmap-google-map></div><div class=col-md-6><button ng-if=!location ng-click=changeLocation() class="btn btn-default btn-sm btn-flat"><i class="fa fa-refresh">Voir les offres là où j\'emménage</i></button><button ng-if=location ng-click=changeLocation() class="btn btn-default btn-sm btn-flat"><i class="fa fa-refresh">Voir les offres pour déménager</i></button><h4 class=page-header>Actuellement {{ads.length}} offres exclusives:</h4><div class="input-group form-inline"><input ng-model=search class="form-control input-sm"><span class=input-group-btn><button class="btn btn-sm btn-default"><i class="fa fa-search"></i></button></span><select ng-model=category ng-options="category._id as category.name for category in categories" class="form-control input-sm"><option value="">Tous les univers</option></select></div><div class=row><p>Distance:</p><input id=range></div><div ng-repeat="ad in ads | filter:search | filter:category" class=row><h3>{{ad.name}}</h3><em>{{ad.address}}</em><p>{{ad.info}}</p></div></div></div></div>'),a.put("components/data-table/ad.html",'<div class=box><div class=box-header><h3 class=box-title>Liste des annonces</h3></div><div class="box-body table-responsible"><div class=row><div class=col-xs-6><a href="" ng-click="status = &quot;pending&quot;">En attente</a> -<a href="" ng-click="status = &quot;enabled&quot;">Activées</a> -<a href="" ng-click="status = &quot;archived&quot;">Archives</a> -<a href="" ng-click="status = &quot;&quot;">Toutes</a></div></div><div class=row><div class=col-xs-6><select ng-model=numItems ng-change=reload()><option value=10>10</option><option value=25>25</option><option value=50>50</option><option value=100>100</option></select>éléments par page</div><div class=col-xs-2></div><div class=col-xs-4><div class=input-group><input ng-model=search placeholder=Recherche class="form-control input-sm pull-right"><div class=input-group-btn><button class="btn btn-sm btn-default"><i class="fa fa-search"></i></button></div></div></div></div><table class="table table-hover"><thead><tr><th>Auteur</th><th>Categorie</th><th>Expiration</th><th class=text-right>Actions</th></tr></thead><tbody><tr ng-repeat="item in current | filter:search | orderBy:predicate:reverse | filter:status:status"><td>{{item.author}}</td><td>{{item.category}}</td><td>{{item.end}}<button ng-click=delete(item) class="btn btn-sm btn-danger pull-right btn-flat"><i class="fa fa-trash"></i></button><button ng-click=update(item) class="btn btn-sm btn-primary pull-right btn-flat"><i class="fa fa-pencil"></i></button></td></tr></tbody></table></div><div class="box-footer clearfix"><div class=row><div class=col-xs-6><span class=tab-info>Affichage {{currentStart + 1}} à {{currentEnd}} sur {{items.length}} éléments</span></div><div class=col-xs-6><pagination total-items=model.length ng-model=currentPage items-per-page=numItems max-size=5 ng-change=reload() class="pagination pagination-sm pull-right no-margin"></pagination></div></div></div></div>'),a.put("components/data-table/category.html",'<div class=box><div class=box-header><h3 class=box-title>Liste des catégorie</h3></div><div class="box-body table-responsible"><div class=row><div class=col-xs-6><select ng-model=numItems ng-change=reload()><option value=10>10</option><option value=25>25</option><option value=50>50</option><option value=100>100</option></select>éléments par page</div><div class=col-xs-2></div><div class=col-xs-4><div class=input-group><input ng-model=search placeholder=Recherche class="form-control input-sm pull-right"><div class=input-group-btn><button class="btn btn-sm btn-default"><i class="fa fa-search"></i></button></div></div></div></div><table class="table table-hover"><thead><tr><th>Nom</th><th class=text-right>Actions</th></tr></thead><tbody><tr ng-repeat="item in current | filter:search | orderBy:predicate:reverse"><td>{{item.name}}</td><td><button ng-click=delete(item) class="btn btn-sm btn-danger pull-right btn-flat"><i class="fa fa-trash"></i></button><button ng-click=update(item) class="btn btn-sm btn-primary pull-right btn-flat"><i class="fa fa-pencil"></i></button></td></tr></tbody></table></div><div class="box-footer clearfix"><div class=row><div class=col-xs-6><span class=tab-info>Affichage {{currentStart + 1}} à {{currentEnd}} sur {{items.length}} éléments</span></div><div class=col-xs-6><pagination total-items=model.length ng-model=currentPage items-per-page=numItems max-size=5 ng-change=reload() class="pagination pagination-sm pull-right no-margin"></pagination></div></div></div></div>'),a.put("components/data-table/data-table.html",'<div class=box><div class=box-header><h3 class=box-title>Liste des catégorie</h3></div><div class="box-body table-responsible"><div class=row><div class=col-xs-6><select ng-model=numItems ng-change=reload()><option value=10>10</option><option value=25>25</option><option value=50>50</option><option value=100>100</option></select>éléments par page</div><div class=col-xs-6><div class=input-group><input ng-model=search placeholder=Recherche class="form-control input-sm pull-right"><div class=input-group-btn><button class="btn btn-sm btn-default"><i class="fa fa-search"></i></button></div></div></div></div><table class="table table-hover"><thead><tr><th ng-repeat="col in cols" ng-click=order(&quot;name&quot;) class=col>{{col}}<i ng-if="reverse &amp;&amp; predicate === &quot;name&quot;" class="fa fa-sort-desc pull-right"></i><i ng-if="!reverse &amp;&amp; predicate === &quot;name&quot;" class="fa fa-sort-asc pull-right"></i><i ng-if="reverse != &quot;name&quot; &amp;&amp; !predicate" class="fa fa-sort pull-right"></i></th><th class=text-right>Actions</th></tr></thead><tbody><tr ng-repeat="item in current | filter:search | orderBy:predicate:reverse"><td>{{item.name}}</td><td><button ng-click=delete(item) class="btn btn-sm btn-danger pull-right btn-flat"><i class="fa fa-trash"></i></button><button ng-click=update(item) class="btn btn-sm btn-primary pull-right btn-flat"><i class="fa fa-pencil"></i></button></td></tr></tbody><tfoot><tr><th ng-repeat="col in cols" ng-click="predicate = col; reverse = !reverse">{{col}}</th><th class=text-right>Actions</th></tr></tfoot></table></div><div class="box-footer clearfix"><div class=row><div class=col-xs-6><span class=tab-info>Affichage {{currentStart + 1}} à {{currentEnd}} sur {{items.length}} éléments</span></div><div class=col-xs-6><pagination total-items=model.length ng-model=currentPage items-per-page=numItems max-size=5 ng-change=reload() class="pagination pagination-sm pull-right no-margin"></pagination></div></div></div></div>'),a.put("components/data-table/user.html",'<div class=box><div class=box-header><h3 class=box-title>Liste des catégorie</h3></div><div class="box-body table-responsible"><div class=row><div class=col-xs-6><select ng-model=numItems ng-change=reload()><option value=10>10</option><option value=25>25</option><option value=50>50</option><option value=100>100</option></select>éléments par page</div><div class=col-xs-2></div><div class=col-xs-4><div class=input-group><input ng-model=search placeholder=Recherche class="form-control input-sm pull-right"><div class=input-group-btn><button class="btn btn-sm btn-default"><i class="fa fa-search"></i></button></div></div></div></div><table class="table table-hover"><thead><tr><th>Nom</th><th>Email</th><th>Adresse</th><th>Téléphone</th><th class=text-right>Actions</th></tr></thead><tbody><tr ng-repeat="item in current | filter:search | orderBy:predicate:reverse"><td>{{item.name}}</td><td>{{item.email}}</td><td>{{item.address}}</td><td>{{item.phone}}</td><td><button ng-click=delete(item) class="btn btn-sm btn-danger pull-right btn-flat"><i class="fa fa-trash"></i></button><button ng-click=update(item) class="btn btn-sm btn-primary pull-right btn-flat"><i class="fa fa-pencil"></i></button></td></tr></tbody></table></div><div class="box-footer clearfix"><div class=row><div class=col-xs-6><span class=tab-info>Affichage {{currentStart + 1}} à {{currentEnd}} sur {{items.length}} éléments</span></div><div class=col-xs-6><pagination total-items=model.length ng-model=currentPage items-per-page=numItems max-size=5 ng-change=reload() class="pagination pagination-sm pull-right no-margin"></pagination></div></div></div></div>'),a.put("components/geo-search/geo-search.html",'<input id=search class="form-control">'),a.put("components/modal/category.html",'<div class=modal-header><button type=button ng-click=$dismiss() class=close>&times;</button><h4 class=modal-title>Ajouter une nouvelle categorie</h4></div><div class=modal-body><form class=form><div class=input-form><label>Nom</label><input ng-model=category.name class="form-control"></div></form></div><div class=modal-footer><button ng-click=$close(category) class="btn btn-primary">Ajouter</button><button ng-click=$dismiss() class="btn btn-default">Annuler</button></div>'),a.put("components/modal/confirm.html",'<div class=modal-danger><div class=modal-header><button type=button ng-click=$dismiss() class=close>&times;</button><h4 class=modal-title>Confirmation</h4></div><div class=modal-body><p>Êtes vous certain de vouloir supprimer<strong>{{name}}</strong>?</p></div><div class=modal-footer><button ng-click=$close() class="btn btn-danger">Supprimer</button><button ng-click=$dismiss() class="btn btn-default">Annuler</button></div></div>'),a.put("components/modal/modal.html",'<div class=modal-header><button ng-if=modal.dismissable type=button ng-click=$dismiss() class=close>&times;</button><h4 ng-if=modal.title ng-bind=modal.title class=modal-title></h4></div><div class=modal-body><p ng-if=modal.text ng-bind=modal.text></p><div ng-if=modal.html ng-bind-html=modal.html></div></div><div class=modal-footer><button ng-repeat="button in modal.buttons" ng-class=button.classes ng-click=button.click($event) ng-bind=button.text class=btn></button></div>'),a.put("components/navbar/navbar.html",'<header ng-controller=NavbarCtrl class=header><nav class="navbar navbar-static-top"><ul class="nav navbar-nav"><li ui-sref-active=active><a ui-sref=main>The Home Pass</a></li></ul><a href="" data-toggle=offcanvas role=button class="navbar-btn sidebar-toggle"><span class=sr-only>Toggle navigation</span><span class=icon-bar></span><span class=icon-bar></span><span class=icon-bar></span></a><ul ng-if=Auth.hasRole(&quot;admin&quot;) class="nav navbar-nav"><li ui-sref-active=active><a ui-sref=admin>Administration</a></li></ul><ul ng-if=Auth.hasRole(&quot;advertiser&quot;) class="nav navbar-nav"><li ui-sref-active=active><a ui-sref=ad>Mes annonces</a></li><li ui-sref-active=active><a ui-sref=pos>Mes points de vente</a></li></ul><div ng-if=Auth.isLoggedIn() class=navbar-right><ul class="nav navbar-nav"><li class="dropdown user user-menu"><a href=# data-toggle=dropdown class=dropdown-toggle><i class="glyphicon glyphicon-user"></i><span>{{ Auth.getCurrentUser().name }}<i class=caret></i></span></a><ul ng-click=$event.stopPropagation() class=dropdown-menu><li class=user-footer><div class=pull-right><a href="" ng-click=logout() class="btn btn-default btn-flat">Se déconnecter</a></div></li></ul></li></ul></div><div ng-if=!Auth.isLoggedIn() class=navbar-right><ul class="nav navbar-nav"><li class="dropdown user user-menu"><a href=# data-toggle=dropdown class=dropdown-toggle><span>Déjà inscrit ?<i class=caret></i></span></a><ul ng-click=$event.stopPropagation() class=dropdown-menu><li class=user-body><form name=form ng-submit=login(form) novalidate><div class=form-group><label>Adresse Email</label><input type=email ng-model=user.email required class="form-control"></div><div class=form-group><label>Mot de passe</label><input type=password ng-model=user.password required class="form-control"></div></form></li><li class=user-footer><div class=pull-right><a href="" ng-click=login(form) class="btn btn-default btn-flat">Se connecter</a></div></li></ul></li></ul></div></nav></header>'),a.put("components/sidebar/sidebar.html",'<section class=sidebar><ul class=sidebar-menu><li ui-sref-active=active><a ui-sref=admin><i class="fa fa-dashboard"></i><span>Dashboard</span></a></li><li ui-sref-active=active><a ui-sref=userAdmin><i class="fa fa-users"></i><span>Utilisateurs</span></a></li><li ui-sref-active=active><a ui-sref=adAdmin><i class="fa fa-map-marker"></i><span>Annonces</span></a></li><li ui-sref-active=active><a ui-sref=categoryAdmin><i class="fa fa-paperclip"></i><span>Categories</span></a></li></ul></section>')
}]);